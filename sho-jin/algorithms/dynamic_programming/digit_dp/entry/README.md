# 桁DP入門

[ぺケンペイさんのブログ記事](https://pekempey.hatenablog.com/entry/2015/12/09/000603)を参考に学習する。

## 問題に取り組んだ感想など

- `i` 桁目の `i` をちゃんと1-originで考えるのが大事。
- 基本は桁数とlessフラグの2次元テーブル、必要になったらテーブルの次元数を増やしていく。

## ABC117 D問題: XXOR

- 2進数の桁DPは、上位i桁目のビットを取るための演算とdpテーブルの添字が逆（？）のため、やや面倒に感じた。
- 場合の数の数え上げではなく、最大値を計算するため、初期化は `dp[0][0]` となる。
- 自分としては、lessフラグに当たる `j` まわりの遷移については、2回分の繰り返しをforループで書くよりは、if文で全部手書きしたほうがわかりやすく感じた。

## 問題集

[はまやんはまやんさんのブログ記事](https://www.hamayanhamayan.com/entry/2017/04/23/212728)

## 桁DPのフレームワーク（自己流）

```go
// 初期化
dp[0][0] = 1
for i := 0; i < len(S); i++ {
  digit := int(S[i] - '0')
  for j := 0; j < 10; j++ {
    // less確定の遷移: dp[i+1][1] <- dp[i][1]

    // less未確定の遷移
    if j < digit {
      // dp[i+1][1] <- dp[i][0]

    } else if j == digit {
      // dp[i+1][0] <- dp[i][0]

    }
  }
}
```

0. 0桁目はless未確定のみ初期化する。
  - 一見不思議だが、less確定を設定してしまうと、1桁目から無造作にすべての値を許す遷移の部分で壊れてしまうので、この初期化は自然。
1. 上位桁から確定させていくために、上位桁から見ていく。
2. 以降のループの外側でチェック中の桁の `digit` を確保しておく。
3. （lessフラグがどうとか考えずに）0から9すべての数字のケースを考える。
  - less確定ならどの数字でも取れるので、`dp[i+1][1] <- dp[i][1]` の遷移を考える。
  - less未確定なら、 `digit` より大きい数字は考えない（考えてはいけない）。
    - `j < digit` な `j` を採用すると、less確定となるので `dp[i+1][1] <- dp[i][0]` の遷移を考える。
    - `j == digit` な `j` を採用すると、依然としてless未確定なので `dp[i+1][0] <- dp[i][0]` の遷移を考える。
