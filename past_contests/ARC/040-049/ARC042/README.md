# ARC042 過去問感想

Last Change: 2020-04-19 13:22:26.

## A問題（@2020-02-06）

制約が大きいので、シミュレーションを工夫する。
一瞬むずそうと思うけど、図を書くと自然とわかる。

Codeforcesっぽいなと思った。

なんか解説スライドではソートでも行けるとか書いてあったが、よくわからず。

## B問題（@2020-02-09）

幾何。。となってしまうけど、凸多角形だったりするので別に難しくない。

公式を忘れていても、このあたりがググってヒットさせられれば、あとは当てはめるだけ。

- [点と直線の距離の公式](https://mathtrain.jp/tentotyokusen)
- [二点を通る直線の方程式](https://mathtrain.jp/nitentyokusen)

実装はできるだけ細かい部品を関数に分けることでわかりやすく、を心がける。

## C問題（@2020-04-19）

ナップサックDPだが、P円を超えてよいのは最小の値段分だけ、ということで工夫せずにやると、
「最小の値段のおやつを決めて、それ以上の集合でDP」というのをすべてのおやつについてやる必要があり、
3乗のDPになってしまう。

そこで、おやつの値段を降順ソートしてからナップサックDPを行う。
遷移元の値段をP円以下からとすれば、禁止された遷移を防ぐことが出来る。
よって最後に `dp[n][0 ~ p+maxA]` 円の範囲で最大を見つけたら終わり。

。。だと思っていたらなぜか小さい制約のテストで4つ落ちる。。
3時間ほど悩んだが、実は自分のやり方だと、
**遷移の途中でP円を超えたものが拾いきれず、その中に最大値がある場合にWAになってしまう**
という問題があることが分かった。

よって最後にDPテーブルをくまなく探索する必要があり、そうするとACできた。

※おそらく遷移を工夫すれば `dp[n][...]` だけの探索でもよいはず。
**あるいは遷移を考えながらグローバルな最大値の更新も行う、など。**

**簡単なナップサックDPだと思ったら、重要な落とし穴にハマっていたので、これはよく覚えておきたい。**

