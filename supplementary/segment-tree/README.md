# セグメントツリー

Haskellの学習をしていてMonoidについての理解が多少深まったため、補習を行っておく。

## 遅延評価なし

### 暗記事項

あまり深く考えずに覚えてしまったほうがいいようなこと。
導出までできたらいいけど、できてもしょうがないし忘れやすいものも多いので、とりあえず暗記ゴリ押しする。

0. セグメントツリーの各ノードは0-based
1. 葉ノード（大本の要素）の数は、元のサイズ以上になる最小の2べきの数とし、これを `N` とする
2. 木全体のノード数は `2*N-1`
3. 大本の配列の `k` 番目にアクセスしたい場合は `k + (N-1)`
4. 親→子への移動は左、右それぞれ `2*k+1, 2*k+2`
5. 子→親への移動は `(k-1)/2` （切り捨て）

0はすべての基本となることなので、絶対に覚えておくこと。

1はこのほうが例外処理が不要だから。

2は、各木の高さにおけるノードの数のビット列をイメージすると、自然とわかる。
3も2から自然と導かれる。

4, 5は導出したいがよくわからない。そういうものと思っておく。
