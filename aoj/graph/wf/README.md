# 全点対間最短経路

APSP: All Pairs Shortest Path: APSP

## ワーシャルフロイドのアルゴリズム

- `G` に負の閉路が無い限り、 `G` の負の重みを持つ辺が存在しても正しく動作する。
- 最短経路だけではなく `G` に負の閉路が存在するか否かを判定することができる。
  - アルゴリズムが終了した時点で、 `G` の **ある頂点 `v` から頂点 `v` （それ自身）への最短距離が負になっていれば、 `G` に負の閉路が存在すると判断することができる。**

### メモリ圧縮の説明

以下は、螺旋本の説明。

> このアルゴリズムは `A[k][i, j]` を求めるために、一見 `A[i, j, k]` のような `O(|V^3|)` のメモリ空間が必要に見えるかもしれません。
> `A[k][i, j]` の計算中に `A[k-1][i, j]` の値が変化してしまうのではないかと考えてしまうかもしれません。
> しかし、 `A[k][k, k] = 0` より、
> `A[k][i, k] = Min(A[k-1][i, k], A[k-1][i, k] + A[k-1][k, k]) = A[k-1][i, k]`
> `A[k][k, j] = Min(A[k-1][k, j], A[k-1][k, k] + A[k-1][k, j]) = A[k-1][k, j]`
> となるので、頂点のすべての組 `[i, j]` について `A[k-1][i, j]` を `A[k-1][i, j]` に上書きしても不都合はないため、
> `A[k][i][j]` は2次元配列で保持することが出来ます。

**※ `k` のみについて経由を検討するため、それにまつわる `A[i][k], A[k][j]` のみの変化を気にしている、と考えると、↑の主張の意味がわかってくる、かもしれない。**

