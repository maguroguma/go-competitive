# ABC148 過去問感想

バーチャル参加をした回。
Dまでが手抜きかと思うくらい簡単だった回。

- A問題は愚直なif文でいいが、 `6 - a - b` が一番スマート。
  - 自分は `a, b` の大小関係を固定してから3つの場合分けをした。
- B問題は「文字列を題材にしたのでfor文を練習してみてください」みたいな問題。
- C問題はLCM求めるだけ。
- D問題は愚直に `O(N)` のシミュレーションをすれば良い。
- E問題は簡単なはずなのに、うまく数えられなかった。
  - 解説放送も踏まえてしっかり学び直す。
- F問題も詰めきれなかったので、解説放送で正しい思考の流れを身につける。

## E問題

与えられた式は二重階乗といって `n!!` と書けるらしい。

`g(n, x) = nをxで何回割れるか？`

`g(n!!, 10) = min(g(n!!, 2), g(n!!, 5))`

と立式できる（わかりやすい）。

普通の階上なら、以下のように再帰的に考えることができる。

`g(n!, p) = n/p + g((n/p)!, p)`

二重階乗の場合は偶奇で場合分けする。
`n` が偶数の場合、

`g(n!!, 2) = g((n/2)!, 2)` + n/2

`g(n!!, 5) = g((n/2)!, 5)`

となる（※2重階上を構築する数列がすべて2で割れるため、簡単に階上の議論に落とせる）。

奇数の場合は、

`n!! = (n!) / (n-1)!!` となる。

以上より、以下のようなコードが書ける。

```go
// g(n!, p)
func g1(n, p int) int {
  if n == 0 {
    return 0
  }
  return n/p + g1(n/p, p)
}

// g(n!!, p)
func g2(n, p int) int {
  if n%2 == 1 {
    return g1(n, p) - g2(n-1, p)
  }
  res := g1(n/2, p)
  if p == 2 {
    res += n/2
  }
  return res
}
```

**一回すべての要素をすべて割ったあとの数列の様子を思い描くと良さそう。**

参考: [階乗、二重階乗、超階乗](https://mathtrain.jp/superfactorial)

## F問題

青木くんから遠い頂点に行きたいが、行けない場合もある。

**高橋くんが移動可能な頂点集合に着目するのが大事！**

移動可能な頂点集合のうち、青木くんから最も遠い頂点がよい。

※「絶対移動しなければならない」ので、最後の詰めの部分がちょっとややこしい。
が、実は場合分けすると、「いずれにせよ最も遠い頂点の1つ手前」になると示せる。

難しいのは、高橋くんの移動可能な頂点の求め方。
が、これは `dist(高橋, V) < dist(青木, V)` の条件を満たす頂点、と考えられる。

※図を書くとわかりやすい気がする。

**自明なところから1つずつ考察を詰めていくのが大事な問題だと感じた。**

