# ABC130 感想

4完だがCで死ぬほど詰まった上8ペナをやらかしてしまったため、またDが簡単でみんな最終的には通していたので、パフォ1050程度の爆死。

Eはちょっと難しくてノーチャンスだったと思うので、今回はレートをキープするべき回だった。

なので、Cで教訓とすべきことをしっかり抑える。

- A問題はかつてないほどやる気のない、if文を書かせる問題。
- B問題は累積和そのもの。
- C問題。問題の問題。
  - 与えられた点を通る直線で長方形を2つに分割するときの小さい方の面積、これを最大化したい、というもの。
  - **典型チック: 最大化したい値の範囲が容易にわかるときは、その最大値を達成する方法について深く考える。**
    - 今回はこういった思考をしないと正しい答えにたどり着けないように思える。
    - [M-SolutionsコンテストのD問題](https://atcoder.jp/contests/m-solutions2019/tasks/m_solutions2019_d)でも大事だった考え方なので、ほぼ典型として頭に叩き込みたい。
  - もしくは[こういった算数](http://www.chugakujuken.com/koushi_blog/shiba/20170818.html)をちゃんと抑えておく。
    - でもこれを叩き込むよりは、ちゃんと↑の事項を押さえたい（再現性があると思うので。。）。
  - [けんちょんさんが挙げていた応用問題](http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=1089)
- D問題は条件に合致する区間の数え上げ。
  - 自分は累積和と2分探索を使った手法が浮かんだのでこちらを書いたが、割と典型的なしゃくとり法の問題だったので、復習がてら、こちらのコードも書いておきたい。
- E問題はLCSっぽさを感じるDP問題（遅延セグ木？使えば一瞬で溶けるらしいが、そんなのは知らん）。
  - 良い勉強にはなりそうなので、早いうちに復習しておきたい。
  - **典型: 数え上げのDPは重複がないような数え方を目指す！**
    - できるのであればこれが一番。
    - 終端を固定する、というのは一つのテクニックかもしれない。

## E問題

LCSっぽい部分列の数え上げ問題。

LCSっぽいが、愚直にLCSをなぞろうとすると一生解けないので、いろいろと注意が必要。

いろいろな解き方があるが、自分としては模範解答の2次元累積和を使うものが理解しやすかった。

以下は今回の問題の教訓。

- 自分が理解したLCSの遷移について改めて理解し直す。
  - **`dp[i][0], dp[0][j]` はすべて0であることを利用して、 `i, j` ともに1以上のdp表しか遷移先を考慮していないことに注意！**
- とりあえず、部分列の状況について、具体的なケースを描いて考察する。
  - 少なくとも考えは前に進むはず。
- **`dp[n][m]` が答えに直結するものだけを考えすぎないこと。**
  - 今回のように、和を考えたほうが自然に進められる場合もある。
- **基本的にDPで数えすぎたものを適宜引く、という手法は悪手かも（？）**
  - 間違いではなくても、とても難しく見通しが悪くなる気がする。

### LCSで漏れなくDP表を遷移させる方法

てんぷらさんの以下のような遷移のさせ方は覚えておいたほうがいいかも。。

重複を除く部分は雰囲気でしか理解できない。。
（直感的には、排反でない集合A,Bの共通部分を引くような話にみえるが、全体の遷移は想像し難い。）

```cpp
    rep(i,n+1)rep(j,m+1){
        if(i>0)dp[i][j]+=dp[i-1][j];
        if(j>0)dp[i][j]+=dp[i][j-1];
        if(i>0&&j>0&&a[i-1]!=b[j-1])dp[i][j]+=mod-dp[i-1][j-1];
        dp[i][j]%=mod;
    }
```

### すぬけさんの方法

重複を数えることは避けるスタイル。

ぶっちゃけ、これも今の自分には理解ができない。

```
dp0[0][0] = 1

for {
  for {
    dp0[i+1][j] += dp0[i][j];
    dp1[i][j] += dp0[i][j];
    dp1[i][j+1] += dp1[i][j];

    if (s[i] == t[j]) {
      dp0[i+1][j+1] += dp1[i][j];
    }
  }
}
```

### 資料集

今回もとてもわかり易かった[アルメリアさんのブログ](https://betrue12.hateblo.jp/entry/2019/06/17/231329)

