# しゃくとり法

ABC038C（単調増加）で出会ったため、学習。
教材はいつもお世話になっている[けんちょんさんのQiita記事](https://qiita.com/drken/items/ecd1a472d3a0e7db8dce)。

## 要点

- 「条件を満たすような区間をすべて求める」事が効率的にできる方法。
  - `O(n^2)` が `O(n)` とか `O(logn)` になる、とか。
- 左端に対して、条件を満たす右端の値が**広義単調増加**するのが最大の特徴。
  - **一見不思議に見えなくもないが、左端のidxが前進することで区間が縮まり、条件に対する区間の状態（和など）が緩和されることから、右端も更に進められる可能性がある、況してや後退することはない、という考察から分かる。**
- スライスのような半開区間をを考え、区間の左端を `left` 右端で条件を満たす最大のものを `f(left)` と呼ぶ。
- しゃくとり法: **`f(left)` まで求まっているときに次の `f(left+1)` を求めるときは、`right = f(left)` から出発して条件を満たさなくなるまでインクリメントしていく。**

## しゃくとり法のC++スニペット一例

```cpp
int right = 0;     
for (int left = 0; left < n; ++left) {
    while (right < n && (right を 1 個進めたときに条件を満たす)) {
        /* 実際に right を 1 進める */
        // ex: sum += a[right];
        ++right;
    }

    /* break した状態で right は条件を満たす最大なので、何かする */
    // ex: res += (right - left);

    /* left をインクリメントする準備 */
    // ex: if (right == left) ++right;
    // ex: else sum -= a[left];
}
```

## しゃくとり法が使える条件

- 「条件」を満たす区間（連続する部分列）のうち、最小の長さを求める。
- 「条件」を満たす区間（連続する部分列）のうち、最大の長さを求める。
- 「条件」を満たす区間（連続する部分列）を数え上げる。

※上の要点で説明した部分について、 `f(left)` の最大値が最小値だったり色々考えを調整する必要はあるので、練習が必要。

---

※知識として仕入れるだけでは不十分で、考察と実装込みの練習も必要なのはもちろんなので、問題に出会ったら以下は適宜更新していく

