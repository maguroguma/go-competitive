# AGC004過去問感想

- A問題は200点だがどうしてもWAを取る方法がわからず解説ACしてしまった。
  - 2つポイントが有る。
  - 1つ目は、奇数の場合がややこしいわけだが、これは数式で書くと整理しやすくなるので、まずは数式で考えたかった。
    - **結局これも全探索的なことが必要となる。**
    - **自己流典型: 条件分岐が複雑になってきたな〜と感じたら、全探索に思考を寄せてみる。**
      - 200点だからと侮るなかれ。。
  - 2つ目は、本当に基礎的なことだが気づかなかった、掛け算によるオーバーフロー。
    - 今回は制約が `10^9` だったので、最大 `10^27` を求めようとしていたことになる。
    - **64ビット符号付き整数の絶対値の最大値は `9,223,372,036,854,775,807`**
      - **大体 `10^(3*6) = 10^18` ぐらいになったらオーバーフローを意識しないといけない！**
    - あまりにも基本的すぎる落とし穴に引っかかってしまったので、大反省すること。
- B問題はとても簡単そうに見えたが、貪欲にやると嘘解法となってしまうらしい。
  - はじめに考えた嘘解法
    - まず、すべてのスライムを捕まえるのだから、すべてのスライムを捕まえるのに必要なコストの最小を N 種類すべてについて求めてやる。
    - そのとき、全種類のスライムに渡って、必要な魔法の回数の最大値を記憶しておく。
    - この魔法回数で必要な変化分は達成できるので、あとは素材となるスライムを捕まえるコストの総和を求めておく。
    - 最後に魔法コストを掛け算で求めて足して、全コストの総和を出力する。
  - ↑の解法はあっている気がするが、何かがおかしいようで通らない。。
    - 実装が何かがおかしい可能性も否定できないが、結局よくわからなかった。
    - ようやくわかってきた気がする。**ある特定のスライム「だけ」に注目して最短コストを考えることがナンセンスっぽい。**
      - 例えば、グローバルに見て必要な魔法回数が大きな数だったとき（どうしても捕まえるのが困難なスライムがいた、など）、他のスライムを得るための選択肢はかなり多いハズ。
      - にもかかわらず、他のスライムを得るときに、個々で必要な魔法回数を調べて最小値をはじき出しても意味がない。
        - 使っていい魔法回数よりも、小さい魔法回数で最適だとはじき出してしまう（本来ならば、もっと魔法が「無料で」使えれば、捕獲コストの小さいスライムから錬成できる可能性があるのに。）
  - 正しい解法は、**魔法回数を固定してその時のコストを調べる、魔法回数を全探索する**、というもの。
