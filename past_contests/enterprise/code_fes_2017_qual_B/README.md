# Code festival 予選B 過去問感想

Last Change: 2020-03-14 11:13:32.

## B問題（@2020-02-16）

ハッシュマップで現時点で残っている問題数を管理しながら、シミュレーションを行えば良い。

## C問題（@2020-03-14）

グラフに関する構築っぽい問題だが、難しい。。
考察がすべて。

最も重要な観察として、 **`s` から `t` へ到達する任意のパスで経路長が奇数のものがある場合、 `s->t` を直接結ぶような辺を張って良い** というものがある。
経路長が `1` の場合は明らかにすでに辺がはられており、 `3` については問題の要求そのもの。
それ以上の奇数については、 `1, 3` のものがすでにはられているため、そこを経由することで本来 `n(奇数)` で到達できたパスが、
`n-2` で到達できるようになる（わからなければ `5` のケースを考えてみれば良い）。

この後は二部グラフかそうでないかの場合分けで答えが異なる。
この部分も結構難しいし、二部グラフの性質を学べるので重要。

二部グラフでない場合は、最終的に完全グラフとなる。
これは、グラフが連結であることから、
**「ある奇サイクルに属する `v` があったとして、任意の頂点の組 `(s, t)` について `s->v->t` というパスが考えられる」**
また、
**「このようなパスが偶然偶数長だった場合は、 `v->v` と奇サイクルを1回ループすることで、奇数長のパスにできる」**
といえる。
よって、結局どの頂点の組も奇数長にでき、つまりは辺を張ることができる。
答えは、完全グラフからすでに張られた辺の本数を引くだけで良い。

二部グラフの場合は、彩色した際に異なる色同士を結ぶことになる。
これは、
「異なる色の頂点間の経路長は必ず偶数になる」
こと ~~と~~
~~「もともと問題で要求されている経路長3のノードを結ぶ場合、絶対に同じ色の頂点を結ぶことにはならないから」~~
~~ということ~~ から導ける。

※解説PDFのこの部分はちょっと納得がいかなかった。
二部グラフの同じグループ内への移動は必ず偶数ステップでしか到達できないから、同じ色同士は結べない、
ぐらいの主張で十分だし、正確なように感じられた。

### 学び

- 二部グラフでない場合は、奇サイクルが含まれる。
  - 「閉路グラフは頂点が偶数個のときに限り二部グラフである。」
- **奇数というのは、足し算を繰り返すことで偶奇性をトグルできる便利なもの、という意識を持っておくとなにかといいことがあるかもしれない。**

