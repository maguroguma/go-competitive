# ABC117感想

初の全完！だと思ったが。。

- A問題は久々の浮動小数点数が必要になる問題で焦ったが、純粋に実数の世界で計算するだけなので問題なし。
  - もっと落ち着きたい。
- B問題もちょっともたついたが、最終的に提出したコードをぱっと思い浮かべたい。
- C問題は16分ほどかかってしまった。
  - もとのスライスをソートして、隣接項間の差分をスライスに詰め込み降順ソートする。
    - 大きいやつをいくつか省いた和を計算する、という流れ。
  - サンプルをいじってしばらくして解けた感じだが、もっと早くできるのだろうか。。？
- D問題はXOR系の問題で通せて嬉しかったが。。
  - 上の桁から貪欲にとる方法は嘘解法だったらしい。。
  - **Kも2進数として捉えることが、まず重要だった。**
    - 考え方のベースは桁DPを知っているとスムーズ、とのこと。
    - XとKについて上位桁からチェックしていき、、
      - **Kのビットが0の場合はXのビットは問答無用で0にするしかない（1にするとKを超えてしまうので）。**
      - **Kのビットが1の場合、、**
        - **Xのビットを1にしたならば何もせずに下位桁へと推移。**
        - **Xのビットを0にしたならばXの以降のビットは好き勝手に立てたり降ろしたりしてもKを超えることはないので、自分が書いた貪欲の方針と同じノリで関数 $f(X)$ の値を計算すれば良い。**
  - 。。多分、WAが出てもこの解答にはたどり着けなかったと思う。
  - 改めて正攻法を実装してみたが、多分本番ではとききれなかったと思う。
    - `k` ではなく `k+1` で考える必要がある部分におそらく最後まで気づけなかったと思われる。
      - **この方法は、注目桁を `0` とした上で、以降のビットを自由に考えるというものなので、2進数の場合は（揃える数-1）までしか数え上げられない。**
        - このあたりは解説PDFの説明が非常にわかりやすい。
          - PDFの「高々2ビットずつ」の意味がよくわからなかったが、これはKが `111...111` とすべて1並ぶようなケースのことをいっていると思われる。
      - 一応、 `k` のまま処理するバージョンも書いてみたが、0桁目だけ例外的に書く必要があり、かなり汚いコードになる。
      - ここまで含めて桁DP的な考え方、になるのだと思う。
      - おそらく2進数だととっつきやすい方だと思うので、10進数ケースなどの問題も取り組みたい。
  - また復習する機会があれば、**今度は桁DPの解法を考えてみること。**
  - **とりあえずXORが絡む問題では、一旦登場するすべての数値を2進数で捉えてみることは、スタート地点で意識したい。**

---

## D問題の嘘解法チェック用テスト

```
3 4
4 0 0
```

これで8が出たら自分が書いた貪欲嘘解法。
13なら正解。

---

## 桁DPの学習のためのリンク

[けんちょんさんのブログ](http://drken1215.hatenablog.com/entry/2019/02/04/013700)
[ABC117解説放送](https://www.youtube.com/watch?v=OOtz0Lx_mRk)

---

## 個人的まとめ

**下位桁が存在すると仮定して、
ある値Kを超えないように上位桁から設定しつつ探索する（同じルーチンを繰り返す）と、
K-1までしか探索されない。**

