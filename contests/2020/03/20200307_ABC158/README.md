# ABC158 感想

Eがちょっと自分には難しかった。
が、しっかり反省したい。

幸いDが最低限の時間で解けたのでパフォは1400とほぼイーブンだった。

- A問題からいきなり問題文が難解。ランレングス圧縮とか考えてしまったが、落ち着いたらif文で素直な条件を書くのが一番簡単だった。
- B問題もなにやら制約がいかつくて難しいが、本質は剰余計算。
- C問題は全探索するのがいいはず。
- D問題はスライスをうまく扱う工夫が必要。「いまあべこべか？」の状態はトグルすることを考えるとパリティを使うべきだった。反省。
- E問題はzero sum ranges系の区間に関する条件を満たすものの個数を数え上げる問題の亜種。
  - ただし剰余計算の部分が難しいので、やはり大変。

## E問題の反省を雑多に

**忘れた頃に解き直したい。**

- 区間の数値の抜き出し方を頭に入れておきたい
  - `[i, j]` の数値は `(D[i] - D[j]) / 10^(桁数)`
    - `D[i]`: 下から `i` 桁目までを数値として評価したもの。
- **「剰余を求める」というのは、かなり無茶な桁数で要求されても意外となんとかなる！というのを強く意識したい。**
  - Digit paradeとかでもそこがネックになっていた。

### けんちょんさんのブログ読解

[けんちょんさんの解説ブログ](https://drken1215.hatenablog.com/entry/2020/03/08/020200)

もうここを読むだけでいい気がする。

> こういう風に「区間に関する問題に置いて、累積和的なものを考える」というのはZero-Sum Rangesでもおなじみの考え方。

そもそも自分はそこがわかっていなかった。。
Zero-Sum Rangesは区間ごとに考える準備をしておくと、自然と条件が導かれる、という印象。
他の問題も、自明ではなくても立式することで見えてくるものがあるから、今後似たような問題設定に遭遇したときは、
必ず考え始められるようにしておきたい。

> 合同式の式変形:
> 一般に `a, m` が互いに素であるならば、
> `x = y (modm) <-> ax = ay (mod m)` が成り立つ。

`<-` の証明は以下の様な感じ。
`ax = ay` ならば `a(x-y)` が `m` で割り切れるということで、
`a` は `m` の因数を打ち消すことはないので、ピュアに `(x-y)` が `m` で割り切れる、と断定できる。

### Zero-Sum Ranges再々復習

**改めて[zero sum ranges](https://atcoder.jp/contests/agc023/tasks/agc023_a)を解き直してみた感想**

- 区間の数え方は2パターンあると思うので、問題に適した形でできると良いと思う。
  - 左端を固定する（始点を左において、そこから末尾まで伸ばしたものを、各始点について数える）
  - 右端を固定する（終点を右において、そこから先頭まで伸ばしたものを、各終点について数える）
  - それぞれで書きやすさだったり、理解しやすさが異なると思うので、問題ごとに柔軟に考えたい。
- **「空な区間を含めない」というのは意外と気をつけないといけない。**
  - 適当に数えると数えちゃいけないものまで数えてしまう。
- （追記） **「（区間に対する）分布の保持」という捉え方も良さそう。**
  - 今回の問題やZero-Sum Rangesでは初期状態が区間全体でそれがどんどん縮退していく、という感じだったが、Rem of Sum is Numは最初から最後まで長さ `k` の区間だったはず。
  - k-DMCはちょっとジャンルに隔たりはあるが、区間を扱う気持ちには関連を感じた。

### 補講: Fast Division

[問題URL](https://onlinejudge.u-aizu.ac.jp/problems/2610)

知識としてしまってもいいが、合同式の勉強として面白い題材だと思った。

こういう `111..1` という数字は **Req Unit数** と呼ばれるらしい。
そしてよくよく考えると、この数は `(10^(p-1) - 1)/9` と考えられる。
`999..9` にしてから `9` で割っている。 `999..9` を `10` のべき乗から導けているのがポイント。

ここでフェルマーの小定理が使えそう。

**`a` と `p` が互いに素なときに `a^(p-1) = 1 (mod p)`**

よって求められる答えはたいてい `0` になりそうと言えるが、
`10` という数値や、分母の `9` という数値について立ち止まって考えると、
以下の点には注意が必要。

- `10` と `p` が互いに素かどうか
- `9` と `p` が互いに素かどうか（そうであれば分母を取っ払うことができる）

`n >= 3` ならば常に大丈夫で `n = 0, 1, 2` についてはサンプルを埋め込めばよい。

