# ARC105 感想

Last Change: 2020-10-13 22:36:06.

## A問題

ビット全探索だったが、ktateishさんから拝借したビット全探索スニペットはちょっと対応しづらい問題設定だった。  
よってフルスクラッチで書いたが、スニペットの方は修正しておきたい。

## B問題

いつかみたGCDを求める問題。

## C問題

制約から `n!` を全部調べるのだとはわかったが、そこから一切進まなかった。

### 解説放送より

順番を決めたら前から詰めていけばいい、の貪欲の証明が難しい気がするが、、。  
とはいえ、証明の概略は以下みたいな感じだと思う。

> 例えば、1番目と2番目の間隔を緩めに取れた状態で、端々の最適値を達成できたとする。  
> ここで、1番目と2番目の間の距離を縮めることを考える。  
> すると、2番目以降の後ろのラクダとの距離は緩和されることになるので、無事縮めることができる、と主張できる。  
> こうなると、再帰的に2番目以降の距離も余裕ができた分さらに縮めることができるので、結局、最適値をより小さくできる。

これが言えると、すべてのラクダの間の距離を、その重量の和を計算しておくことで、
橋の中から距離を保つべきはどれか、というのが調べられるようになる。

この部分を愚直に線形探索してしまうと、全体の計算量が `O(n! * n^2 * m)` になってしまう。  
しかしながら、例えば同じ橋の長さで重量制限が異なるものがあったとき、当然ながら、考慮しなければならないのは、
重量制限が小さい方だけである。  
同様に、観なくて良い橋だけを残していくと、橋の長さと重量制限の値が比例するようになる。

よって、これらをソートしておけば、二分探索を用いることが出来、十分高速になる。

### 典型要素

貪欲部分は難しかったとは思うが、最悪この部分は無証明で進める状態にしたかった。

そう考えると、一番身につけたいと思ったのは、「考慮しなくて良い橋を省いて単調性をもたせる部分の前処理」
だったのではないかと思う。

## D問題

Nim要素が出てきたのでお手上げになってしまった。  
一部水色も解いていたので解きたかったが。。

### 解説放送より

Nimの必勝法、すなわち「すべての山の石の数のXORが1以上にできるかどうか（先手目線）」ということを知ると、
この問題は「コインの過半数が乗った皿を作ることができるか？」ということを考えることに集中すれば良くなる。

`n` が奇数のときは、後手が残っている袋でコインが一番多いものを、その時点で一番コインがたくさん載っているものに載せていけば良い。  
なぜなら、Nimの先手は後手に回ってくるため、勝利確定状態で先手を迎えられるから。  
よって `n` が奇数なら後手が必勝。

`n` が偶数のときも方針は同じで、Nimの先手を迎えることになる先手は、過半数の山を作りたくなる。  
これが出来ないのは、袋に入ったコインの枚数すべての種類について、そのような袋の個数が偶数個である場合のみ。  
なぜならこの場合は、後手は先手の行動を真似るような形で同じ枚数の山しか作れず、過半数の山が作れなくなるから
（もっというと、XORが0になるような状況が作れる、といって良さそう）。  
一方で、そうでない場合は、コインの多いものから先に選んでしまえば、絶対に勝利確定状態でNimのフェーズを迎えられる。

。。Nimの必勝法ぐらい予習しておくべきだった。。

